{% extends 'base/base.html' %}
{% load staticfiles %}
{% block title %}
    优朋普乐数据库管理平台-DB概览
{% endblock %}
{% block heading %}
    <h1><i class='fa fa-file'></i> DB 进程管理 </h1>
    <h3>查看 mysql instance 运行状态，详细信息等</h3>
{% endblock %}

{% block content %}
    <div class="col-md-12">
        <div class="widget">
            <div class="widget-header">
                <h2><strong><a href="{% url 'statistics_instance_list' %}" class="glyphicon glyphicon-arrow-left"
                               aria-hidden="true"></a> </strong> IP进程列表</h2>
                <div class="additional-btn">
                    <a href="#" class="hidden reload"><i class="icon-ccw-1"></i></a>
                    <a href="#" class="widget-toggle"><i class="icon-down-open-2"></i></a>
                    <a href="#" class="widget-close"><i class="icon-cancel-3"></i></a>
                </div>
            </div>
            <div class="widget-content">
                <br>
                <div class="table-responsive">
                    <form class='form-horizontal' role='form'>
                        <table id="datatables-2" class="table table-striped table-bordered" cellspacing="0"
                               width="100%">
                            <thead>
                            <tr>
                                <th>Id</th>
                                <th>User</th>
                                <th>Host</th>
                                <th>db</th>
                                <th>Command</th>
                                <th>Time</th>
                                <th>State</th>
                                <th>Info</th>
                            </tr>
                            </thead>

                            <tfoot>
                            <tr>
                                <th>Id</th>
                                <th>User</th>
                                <th>Host</th>
                                <th>db</th>
                                <th>Command</th>
                                <th>Time</th>
                                <th>State</th>
                                <th>Info</th>
                            </tr>
                            </tfoot>

                            <tbody>
                            {% if result == 'error' %}

                            {% else %}
                                {% for res in result %}
                                    <tr>
                                        {% for foo in res %}
                                            {% if forloop.counter == 8 %}
                                                {% if foo == 'None' %}
                                                    {# TODO 加上显示按钮 #}
                                                    <td>sss</td>
                                                {% else %}
                                                    <td>{{ foo }}</td>
                                            {% endif %}
                                            {% else %}
                                                <td>{{ foo }}</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            {% endif %}
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
    <script src="{% static 'assets/libs/jquery-icheck/icheck.min.js' %}"></script>
    <script src="{% static 'assets/libs/jquery-datatables/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'assets/libs/jquery-datatables/js/dataTables.bootstrap.js' %}"></script>
    <script src="{% static 'assets/libs/jquery-datatables/extensions/TableTools/js/dataTables.tableTools.min.js' %}"></script>
    <script src="{% static 'assets/js/pages/datatables.js' %}"></script>
{% endblock %}